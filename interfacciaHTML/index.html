<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <script src="js/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="style.css">
    </script>
    <script type="text/javascript" language="javascript">
        $(document).ready(() => {
            let url = "http://localhost:8080/SaveStrings/";
            let token;
            //register
            $("#btnRegister").click(() => {
                $.getJSON(url + "register?username=" + $("#txtUsernameR").val() + "&password=" + $("#txtPasswordR").val(), function (log) {
                    if (log.status == "ok") {
                        $('#resultRegister').html('Registrato');
                        $('#resultRegister').css('color', 'green')
                    }

                });
            })
            //login
            $("#btnGetToken").click(() => {
                $.getJSON(url + "getToken?username=" + $("#txtUsernameT").val() + "&password=" + $("#txtPasswordT").val(), function (log) {
                    if (log.status == "ok") {
                        $('#resultToken').text(log.token);
                        token = log.token;
                    } else {
                        $('#resultToken').text(log.message);
                    }
                });
            })
            //getKeys
            $("#btnGetKeys").click(() => {
                $.getJSON(url + "getKeys?token=" + token, function (log) {
                    if (log.status == "ok") {
                        $('#resultKeys').html(log.keys.join());
                    } else {
                        $('#resultKeys').html(log.message);
                    }
                });
            })
            //setString
            $("#btnSetString").click(() => {
                $.getJSON(url + "setString?token=" + token + "&key=" + $("#txtKeyI").val() + "&string=" + $("#txtString").val(), function (log) {
                    $('#resultSetString').html(log.message);
                });
            })
            //delString
            $("#btnDelString").click(() => {
                $.getJSON(url + "deleteString?token=" + token + "&key=" + $("#txtKeyD").val(), function (log) {
                    $('#resultDelString').html(log.message);
                });
            })
            //getString
            $("#btnGetString").click(() => {
                $.getJSON(url + "getString?token=" + token + "&key=" + $("#txtKeyO").val(), function (log) {
                    if (log.status == "ok") {
                        $('#resultGetString').html(log.string);
                    } else {
                        $('#resultGetString').html(log.message);
                    }
                });
            })
        })
    </script>
</head>

<body>
    <table>
        <tr>
            <th>Metodo</th>
            <th>Parametro 1</th>
            <th>Parametro 2</th>
            <th>Invia</th>
            <th>Risultato</th>
        </tr>
        <tr>
            <td>Registrati</td>
            <td><input type="text" id="txtUsernameR" placeholder="Username"></td>
            <td><input type="text" id="txtPasswordR" placeholder="Password"></td>
            <td><button id="btnRegister">Registrati</button></td>
            <td></td><label id="resultRegister"></label></td>
        </tr>
        <tr>
            <td>Ottieni il token</td>
            <td><input type="text" id="txtUsernameT" placeholder="Username"></td>
            <td><input type="text" id="txtPasswordT" placeholder="Password"></td>
            <td><button id="btnGetToken">Ottieni il token</button></td>
            <td><label id="resultToken"></label>
            </td>
        </tr>
        <tr>
            <td>Ottieni le keys di tutte le stringhe</td>
            <td></td>
            <td></td>
            <td><button id="btnGetKeys">Ottieni le chiavi</button></td>
            <td><label id="resultKeys"></label></td>
        </tr>
        <tr>
            <td>Inserisci una stringa</td>
            <td><input type="text" id="txtKeyI" placeholder="Key"></td>
            <td><input type="text" id="txtString" placeholder="String"></td>
            <td><button id="btnSetString">Inserisci stringa</button></td>
            <td><label id="resultSetString"></label></td>
        </tr>
        <tr>
            <td>Elimina una stringa</td>
            <td><input type="text" id="txtKeyD" placeholder="Key"></td>
            <td></td>
            <td><button id="btnDelString">Inserisci stringa</button></td>
            <td><label id="resultDelString"></label></td>
        </tr>
        <tr>
            <td>Ottieni una stringa</td>
            <td><input type="text" id="txtKeyO" placeholder="Key"></td>
            <td></td>
            <td><button id="btnGetString">Ottieni stringa</button></td>
            <td><label id="resultGetString"></label></td>
        </tr>
    </table>
</body>

</html>